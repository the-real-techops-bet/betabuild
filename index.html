
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Activity Puzzle ‚Äì Dora Explorer Jungle V6</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<style>
  * { box-sizing: border-box; font-family: system-ui, sans-serif; }
  body {
    margin: 0; padding: 0; min-height: 100vh;
    display: flex; justify-content: center; align-items: center;
    background: #fef9e6;
  }
  .app {
    width: 100%; max-width: 780px;
    background: #fff9e6;
    padding: 16px; margin: 10px;
    border-radius: 20px;
    box-shadow: 0 8px 28px rgba(0,0,0,0.25);
    border: 3px solid #fcd34d;
  }

  /* NEW ‚Äî splash icon big */
  .intro {
    position: absolute; inset: 0;
    background: #fff9e6;
    display: flex; flex-direction: column;
    justify-content: center; align-items: center;
    padding: 20px; z-index: 50;
  }
  .intro-emoji {
    font-size: 90px;   /* BIGGER */
    margin-bottom: 10px;
  }
  .intro h2 { font-size: 1.4rem; margin: 6px 0; color:#111; }
  .intro p { max-width: 300px; text-align:center; color:#555; }

  .intro-btn {
    margin-top: 12px;
    padding: 12px 22px;
    background: linear-gradient(135deg,#9b5de5,#ec4899);
    color: #fff; border:none; border-radius: 999px;
    font-weight:700; font-size:1.1rem;
    display:flex; align-items:center; gap:6px;
    box-shadow:0 8px 20px rgba(147,51,234,0.6);
  }

  #file-input { display:none; }

  .upload-label {
    display:block; margin: 0 auto 10px;
    background: #9b5de5; color:#fff;
    padding:10px 16px; border-radius:999px;
    font-weight:700; cursor:pointer;
  }

  .layout { display:flex; flex-wrap:wrap; gap:10px; }

  #pile-area {
    min-height: 180px;
    border: 2px dashed #a5f3fc;
    border-radius: 18px;
    padding: 10px;
    display:flex; flex-wrap:wrap; gap:10px; justify-content:center;
    background:#e0f2fe;
  }

  /* NEW ‚Äî 4:3 puzzle pieces */
  .piece {
    width: 160px; height: 120px;        /* 4:3 ratio */
    border-radius: 14px;
    overflow:hidden; cursor:grab;
    background:#ddd;
    box-shadow:0 4px 10px rgba(0,0,0,0.25);
  }
  .piece img {
    width:100%; height:100%;
    object-fit: cover;
  }

  .slots-grid { display:flex; flex-direction:column; gap:10px; }

  /* NEW ‚Äî 4:3 slots */
  .slot {
    height: 120px;                      /* 4:3 ratio slot */
    border-radius: 16px;
    background:#fff3cd;
    border:3px solid #ffb74d;
    overflow:hidden;
  }

  .slot-label {
    font-size:0.85rem;
    margin-bottom:3px;
    text-align:center;
    background:#9b5de5; color:#fff;
    border-radius:999px;
    padding:3px 10px;
    width:75px;
  }

  .bottom-bar {
    margin-top:10px; display:flex; flex-wrap:wrap;
    justify-content:space-between; gap:8px;
  }

  .btn {
    border:none; border-radius:999px;
    padding:8px 12px; font-weight:700;
    cursor:pointer;
  }
  .btn-primary { background:#22c55e; color:#fff; }
  .btn-secondary { background:#dbeafe; }
  .btn-danger { background:#fee2e2; color:#b91c1c; }

</style>
</head>
<body>

<div class="app">

  <!-- Splash Screen -->
  <div id="intro" class="intro">
    <div class="intro-emoji">ü¶ú</div> <!-- BIG FUN ICON -->
    <h2>Let‚Äôs Start Our Adventure!</h2>
    <p>Upload pictures, then drag them into the boxes. What happens FIRST? What happens LAST?</p>
    <button id="intro-start" class="intro-btn">üåü Start</button>
  </div>

  <label class="upload-label" for="file-input">üì∑ Add Pictures</label>
  <input id="file-input" type="file" accept="image/*" multiple />

  <div class="layout">
    <section style="flex:1 1 300px;">
      <h3>üéí Backpack Pieces</h3>
      <div id="pile-area"></div>
    </section>

    <section style="flex:1 1 300px;">
      <h3>üó∫Ô∏è Map Steps</h3>
      <div id="slots-grid" class="slots-grid"></div>
    </section>
  </div>

  <div class="bottom-bar">
    <button id="start-over" class="btn btn-danger">Start Over</button>
    <button id="reset-puzzle" class="btn btn-secondary">Reset</button>
    <button id="save-btn" class="btn btn-primary">Save</button>
  </div>

</div>

<script>
/* BASIC SCRIPT TO HANDLE PIECES + SLOTS */

let pieces = [];
let slots = [null,null,null,null,null];
const pileArea = document.getElementById("pile-area");
const slotsGrid = document.getElementById("slots-grid");
const fileInput = document.getElementById("file-input");
const intro = document.getElementById("intro");
document.getElementById("intro-start").onclick = () => intro.style.display = "none";

function buildSlots(){
  slotsGrid.innerHTML="";
  const names = ["FIRST","SECOND","THIRD","FOURTH","LAST"];
  for(let i=0;i<5;i++){
    const wrap=document.createElement("div");
    const lab=document.createElement("div");
    lab.className="slot-label";
    lab.textContent = names[i];
    const slot=document.createElement("div");
    slot.className="slot";
    slot.dataset.index=i;

    slot.addEventListener("dragover",e=>e.preventDefault());
    slot.addEventListener("drop",e=>{
      e.preventDefault();
      const id = e.dataTransfer.getData("id");
      moveToSlot(id,i);
    });

    slot.onclick=()=>{
      if(selectedPiece){
        moveToSlot(selectedPiece,i);
        selectedPiece=null;
      }
    };

    wrap.appendChild(lab);
    wrap.appendChild(slot);
    slotsGrid.appendChild(wrap);
  }
}

let selectedPiece = null;

function makePiece(p){
  const d=document.createElement("div");
  d.className="piece";
  d.draggable=true;
  d.dataset.id=p.id;
  d.innerHTML=`<img src="${p.url}"/>`;

  d.onclick=()=>{
    selectedPiece = p.id;
  };

  d.addEventListener("dragstart", e=>{
    e.dataTransfer.setData("id",p.id);
  });

  return d;
}

function moveToSlot(id,i){
  const old=slots.indexOf(id);
  if(old!==-1) slots[old]=null;
  slots[i]=id;
  render();
}

function render(){
  pileArea.innerHTML="";
  pieces.forEach(p=>{
    if(!slots.includes(p.id)){
      pileArea.appendChild(makePiece(p));
    }
  });

  document.querySelectorAll(".slot").forEach((slot,i)=>{
    slot.innerHTML="";
    const id=slots[i];
    if(id){
      const p = pieces.find(x=>x.id===id);
      if(p) slot.appendChild(makePiece(p));
    }
  });
}

fileInput.addEventListener("change", e=>{
  const files=[...e.target.files].slice(0,10);
  files.forEach(f=>{
    const url = URL.createObjectURL(f);
    pieces.push({id:Date.now()+Math.random(),url});
  });
  render();
  fileInput.value="";
});

document.getElementById("reset-puzzle").onclick=()=>{
  slots=[null,null,null,null,null];
  render();
};

document.getElementById("start-over").onclick=()=>{
  if(confirm("Remove all pictures?")){
    pieces=[]; slots=[null,null,null,null,null];
    render();
  }
};

document.getElementById("save-btn").onclick=()=>{
  alert("Order saved.

"+JSON.stringify(slots));
};

buildSlots();
render();
</script>

</body>
</html>

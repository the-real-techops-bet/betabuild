<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>My Activity Order ‚Äì Visual Choice Game (Mobile Friendly)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * {
      box-sizing: border-box;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }
    body {
      margin: 0;
      padding: 0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at top, #bfdbfe 0, #e5f3ff 45%, #f9fafb 100%);
    }
    .app {
      background: #ffffff;
      width: 100%;
      max-width: 640px;
      margin: 12px;
      padding: 18px 16px 20px;
      border-radius: 20px;
      box-shadow: 0 18px 40px rgba(15, 23, 42, 0.15);
      position: relative;
      overflow: hidden;
    }
    header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 8px;
    }
    .icon-circle {
      width: 56px;
      height: 56px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #dcfce7, #22c55e);
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 8px 20px rgba(34, 197, 94, 0.6);
      font-size: 30px;
    }
    h1 {
      margin: 0;
      font-size: 1.4rem;
      color: #111827;
    }
    .subtitle {
      margin: 2px 0 0;
      font-size: 0.9rem;
      color: #4b5563;
    }
    .hint {
      margin-top: 6px;
      font-size: 0.85rem;
      color: #6b7280;
      background: #eff6ff;
      padding: 6px 8px;
      border-radius: 10px;
    }
    .hint strong {
      color: #1d4ed8;
    }
    .controls {
      margin: 14px 0 10px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
      justify-content: space-between;
    }
    .file-label {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 10px 16px;
      border-radius: 999px;
      background: linear-gradient(135deg, #2563eb, #22c55e);
      color: white;
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 8px 18px rgba(37, 99, 235, 0.5);
      border: none;
      white-space: nowrap;
    }
    .file-label span {
      font-size: 1.1rem;
    }
    #file-input {
      display: none;
    }
    .small-text {
      font-size: 0.8rem;
      color: #6b7280;
      margin-left: 2px;
    }
    .list-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-top: 4px;
      margin-bottom: 6px;
    }
    .list-title {
      font-size: 0.95rem;
      color: #374151;
      font-weight: 600;
    }
    .legend {
      font-size: 0.78rem;
      color: #6b7280;
      text-align: right;
    }
    .legend span {
      display: inline-flex;
      align-items: center;
      gap: 3px;
      margin-left: 4px;
    }
    .badge {
      border-radius: 999px;
      padding: 1px 8px;
      font-size: 0.72rem;
      font-weight: 600;
    }
    .badge-first { background: #dcfce7; color: #15803d; }
    .badge-last { background: #fee2e2; color: #b91c1c; }
    .list {
      list-style: none;
      padding: 0;
      margin: 0;
      max-height: 60vh;
      overflow-y: auto;
      border-radius: 14px;
      border: 1px dashed #cbd5f5;
      background: #f9fafb;
    }
    .empty-state {
      padding: 18px 14px;
      text-align: center;
      color: #6b7280;
      font-size: 0.9rem;
    }
    .empty-state span {
      display: block;
      font-size: 2rem;
      margin-bottom: 4px;
    }
    .item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px 10px;
      border-bottom: 1px solid #e5e7eb;
      background: #ffffff;
    }
    .item:last-child {
      border-bottom: none;
    }
    .index-circle {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      flex-shrink: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.9rem;
      font-weight: 700;
      color: #111827;
      background: #e5e7eb;
    }
    .index-circle.first {
      background: #bbf7d0;
      color: #166534;
    }
    .index-circle.last {
      background: #fecaca;
      color: #b91c1c;
    }
    .thumb-wrapper {
      position: relative;
      width: 80px;
      height: 80px;
      border-radius: 14px;
      overflow: hidden;
      flex-shrink: 0;
      background: #e5e7eb;
    }
    .thumb-wrapper img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }
    .thumb-label {
      flex: 1;
      min-width: 0;
    }
    .thumb-label-input {
      width: 100%;
      border-radius: 10px;
      border: 1px solid #e5e7eb;
      padding: 6px 8px;
      font-size: 0.9rem;
      color: #111827;
      background: #f9fafb;
    }
    .thumb-label-input::placeholder {
      color: #9ca3af;
    }
    .actions {
      display: flex;
      flex-direction: column;
      gap: 4px;
      align-items: center;
      width: 52px;
      flex-shrink: 0;
    }
    .move-btn, .remove-btn {
      border-radius: 999px;
      border: none;
      width: 36px;
      height: 26px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1rem;
      cursor: pointer;
    }
    .move-btn {
      background: #e5e7eb;
      color: #374151;
    }
    .move-btn:disabled {
      opacity: 0.4;
      cursor: default;
    }
    .remove-btn {
      background: #fee2e2;
      color: #b91c1c;
      font-size: 0.9rem;
    }
    .bottom-bar {
      margin-top: 10px;
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }
    .order-text {
      font-size: 0.8rem;
      color: #6b7280;
      max-width: 60%;
    }
    .primary-btn {
      border: none;
      border-radius: 999px;
      padding: 8px 16px;
      background: #22c55e;
      color: white;
      font-weight: 600;
      font-size: 0.9rem;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(22, 163, 74, 0.5);
      display: inline-flex;
      align-items: center;
      gap: 4px;
      white-space: nowrap;
    }
    .primary-btn:disabled {
      opacity: 0.5;
      cursor: default;
      box-shadow: none;
    }
    .result-box {
      margin-top: 10px;
      padding: 8px 10px;
      border-radius: 10px;
      background: #eff6ff;
      font-size: 0.82rem;
      color: #1f2937;
      max-height: 160px;
      overflow-y: auto;
      display: none;
      border: 1px solid #bfdbfe;
    }
    .result-box strong {
      font-size: 0.85rem;
    }
    .result-item {
      margin-top: 2px;
    }
    .toast {
      position: fixed;
      left: 50%;
      bottom: 16px;
      transform: translateX(-50%);
      background: rgba(17, 24, 39, 0.92);
      color: #f9fafb;
      padding: 8px 12px;
      border-radius: 999px;
      font-size: 0.82rem;
      display: none;
      z-index: 9999;
    }
    .toast.show {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      animation: fadeToast 2s ease-out forwards;
    }
    @keyframes fadeToast {
      0% { opacity: 0; transform: translate(-50%, 6px); }
      10% { opacity: 1; transform: translate(-50%, 0); }
      80% { opacity: 1; transform: translate(-50%, 0); }
      100% { opacity: 0; transform: translate(-50%, 6px); }
    }
    .overlay {
      position: absolute;
      inset: 0;
      background: rgba(15,23,42,0.35);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 20;
    }
    .overlay-content {
      background: #ffffff;
      border-radius: 18px;
      padding: 16px 14px;
      max-width: 320px;
      width: 90%;
      text-align: center;
      box-shadow: 0 16px 40px rgba(15,23,42,0.4);
    }
    .overlay-content h2 {
      margin: 4px 0 4px;
      font-size: 1.1rem;
      color: #111827;
    }
    .overlay-content p {
      margin: 4px 0 10px;
      font-size: 0.9rem;
      color: #4b5563;
    }
    .overlay-buttons {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-top: 8px;
      flex-wrap: wrap;
    }
    .btn-soft {
      border-radius: 999px;
      border: none;
      padding: 7px 14px;
      font-size: 0.9rem;
      cursor: pointer;
    }
    .btn-soft.primary {
      background: #22c55e;
      color: #f9fafb;
    }
    .btn-soft.secondary {
      background: #e5e7eb;
      color: #111827;
    }
    .intro-screen {
      position: absolute;
      inset: 0;
      background: #ffffff;
      padding: 18px 16px 20px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      z-index: 30;
    }
    .intro-title {
      font-size: 1.4rem;
      color: #111827;
      margin-bottom: 6px;
    }
    .intro-text {
      font-size: 0.95rem;
      color: #4b5563;
      margin-bottom: 14px;
    }
    .intro-emoji {
      font-size: 44px;
      margin-bottom: 10px;
    }
    .intro-btn {
      border-radius: 999px;
      border: none;
      padding: 10px 20px;
      background: #2563eb;
      color: #f9fafb;
      font-size: 1rem;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      box-shadow: 0 8px 18px rgba(37, 99, 235, 0.5);
    }
    .intro-subnote {
      margin-top: 10px;
      font-size: 0.78rem;
      color: #9ca3af;
      max-width: 260px;
    }
    @media (max-width: 480px) {
      .app { border-radius: 16px; padding: 16px 12px 18px; }
      .thumb-wrapper { width: 72px; height: 72px; }
      .item { padding: 8px 8px; }
      .controls { flex-direction: column; align-items: flex-start; }
      .order-text { max-width: 100%; }
    }
  </style>
</head>
<body>
  <div class="app">
    <div id="intro" class="intro-screen">
      <div class="intro-emoji">üß©</div>
      <div class="intro-title">What do you want to do first?</div>
      <div class="intro-text">
        We‚Äôll use <strong>pictures</strong> to help her choose what she wants to do
        <strong>first</strong>, <strong>next</strong>, and <strong>last</strong>.
      </div>
      <button id="intro-start" class="intro-btn">
        Start with pictures üì∑
      </button>
      <div class="intro-subnote">
        Tip: Use photos of real places and things she knows well (park, tablet, snack, TV, walk, quiet time).
      </div>
    </div>

    <header>
      <div class="icon-circle">‚≠êÔ∏è</div>
      <div>
        <h1>My Activity Order</h1>
        <p class="subtitle">Upload pictures and move them so her favorite is at the top.</p>
      </div>
    </header>

    <p class="hint">
      <strong>Caregiver:</strong> Ask, ‚ÄúWhich do you want to do <strong>first</strong>? Then next?‚Äù.
      She can tap the arrows to move pictures up or down.
    </p>

    <div class="controls">
      <div>
        <label class="file-label">
          <span>üì∑</span> Add pictures
          <input id="file-input" type="file" accept="image/*" multiple />
        </label>
        <div class="small-text">Up to about 10 photos works best on a phone.</div>
      </div>
    </div>

    <div class="list-header">
      <div class="list-title">Tap ‚ñ≤ or ‚ñº so her favorite is at the top.</div>
      <div class="legend">
        <span><span class="badge badge-first">FIRST</span></span>
        <span><span class="badge badge-last">LAST</span></span>
      </div>
    </div>

    <ul id="list" class="list">
      <li class="empty-state" id="empty-state">
        <span>‚¨ÜÔ∏è</span>
        Tap <strong>Add pictures</strong> to start. Then use the arrows to put her favorite at the top.
      </li>
    </ul>

    <div class="bottom-bar">
      <div class="order-text">
        When finished, tap <strong>Save order</strong> to see a simple list you can copy or screenshot.
      </div>
      <button id="save-btn" class="primary-btn" disabled>
        ‚úÖ Save order
      </button>
    </div>

    <div id="result-box" class="result-box"></div>

    <div id="confirm-overlay" class="overlay">
      <div class="overlay-content">
        <h2>All done?</h2>
        <p>Is she finished choosing the order from <strong>FIRST</strong> to <strong>LAST</strong>?</p>
        <div class="overlay-buttons">
          <button id="confirm-no" class="btn-soft secondary">Keep changing</button>
          <button id="confirm-yes" class="btn-soft primary">Yes, show the list</button>
        </div>
      </div>
    </div>

    <div id="toast" class="toast">‚úÖ Pictures added</div>
  </div>

  <script>
    const fileInput = document.getElementById("file-input");
    const listEl = document.getElementById("list");
    const emptyState = document.getElementById("empty-state");
    const saveBtn = document.getElementById("save-btn");
    const resultBox = document.getElementById("result-box");
    const toast = document.getElementById("toast");
    const intro = document.getElementById("intro");
    const introStart = document.getElementById("intro-start");
    const confirmOverlay = document.getElementById("confirm-overlay");
    const confirmYes = document.getElementById("confirm-yes");
    const confirmNo = document.getElementById("confirm-no");

    let items = [];

    introStart.addEventListener("click", () => {
      intro.style.display = "none";
    });

    function showToast(msg) {
      toast.textContent = msg;
      toast.classList.add("show");
      setTimeout(() => {
        toast.classList.remove("show");
      }, 2000);
    }

    fileInput.addEventListener("change", (e) => {
      const files = Array.from(e.target.files || []);
      if (!files.length) return;

      const remainingSlots = Math.max(0, 10 - items.length);
      const toUse = files.slice(0, remainingSlots);

      if (!toUse.length) {
        showToast("Limit of 10 pictures reached");
        fileInput.value = "";
        return;
      }

      toUse.forEach((file) => {
        if (!file.type.startsWith("image/")) return;

        const url = URL.createObjectURL(file);
        items.push({
          id: Date.now().toString() + Math.random().toString(16).slice(2),
          src: url,
          label: ""
        });
      });

      setTimeout(() => {
        renderList();
        showToast("Added " + toUse.length + " picture" + (toUse.length > 1 ? "s" : ""));
      }, 50);

      fileInput.value = "";
    });

    function renderList() {
      listEl.innerHTML = "";
      if (!items.length) {
        listEl.appendChild(emptyState);
        saveBtn.disabled = true;
        resultBox.style.display = "none";
        return;
      }

      saveBtn.disabled = false;

      items.forEach((item, index) => {
        const li = document.createElement("li");
        li.className = "item";

        const indexCircle = document.createElement("div");
        indexCircle.className = "index-circle";
        indexCircle.textContent = index + 1;
        if (index === 0) indexCircle.classList.add("first");
        if (index === items.length - 1) indexCircle.classList.add("last");

        const thumbWrap = document.createElement("div");
        thumbWrap.className = "thumb-wrapper";
        const img = document.createElement("img");
        img.src = item.src;
        img.alt = "activity picture " + (index + 1);
        thumbWrap.appendChild(img);

        const labelWrap = document.createElement("div");
        labelWrap.className = "thumb-label";
        const input = document.createElement("input");
        input.type = "text";
        input.className = "thumb-label-input";
        input.placeholder = "Type a short name (e.g. Park, TV, Snack)";
        input.value = item.label || "";
        input.addEventListener("input", (e) => {
          item.label = e.target.value;
        });
        labelWrap.appendChild(input);

        const actions = document.createElement("div");
        actions.className = "actions";

        const upBtn = document.createElement("button");
        upBtn.className = "move-btn";
        upBtn.textContent = "‚ñ≤";
        upBtn.disabled = index === 0;
        upBtn.addEventListener("click", () => {
          moveItem(index, -1);
        });

        const downBtn = document.createElement("button");
        downBtn.className = "move-btn";
        downBtn.textContent = "‚ñº";
        downBtn.disabled = index === items.length - 1;
        downBtn.addEventListener("click", () => {
          moveItem(index, 1);
        });

        const removeBtn = document.createElement("button");
        removeBtn.className = "remove-btn";
        removeBtn.textContent = "‚úï";
        removeBtn.title = "Remove this picture";
        removeBtn.addEventListener("click", () => {
          items.splice(index, 1);
          renderList();
        });

        actions.appendChild(upBtn);
        actions.appendChild(downBtn);
        actions.appendChild(removeBtn);

        li.appendChild(indexCircle);
        li.appendChild(thumbWrap);
        li.appendChild(labelWrap);
        li.appendChild(actions);
        listEl.appendChild(li);
      });
    }

    function moveItem(index, direction) {
      const newIndex = index + direction;
      if (newIndex < 0 || newIndex >= items.length) return;
      const [moved] = items.splice(index, 1);
      items.splice(newIndex, 0, moved);
      renderList();
    }

    saveBtn.addEventListener("click", () => {
      if (!items.length) return;
      confirmOverlay.style.display = "flex";
    });

    confirmNo.addEventListener("click", () => {
      confirmOverlay.style.display = "none";
    });

    confirmYes.addEventListener("click", () => {
      confirmOverlay.style.display = "none";
      showResults();
    });

    function showResults() {
      if (!items.length) return;
      let lines = [];
      items.forEach((item, index) => {
        const label = item.label && item.label.trim().length
          ? item.label.trim()
          : "Picture " + (index + 1);
        let tag = "";
        if (index === 0) tag = " (FIRST)";
        else if (index === items.length - 1) tag = " (LAST)";
        lines.push((index + 1) + ". " + label + tag);
      });
      resultBox.style.display = "block";
      resultBox.innerHTML = "<strong>Current order (you can copy or screenshot):</strong>" +
        lines.map(l => `<div class="result-item">${l}</div>`).join("");
      resultBox.scrollTop = 0;
      showToast("Order saved");
    }

    renderList();
  </script>
</body>
</html>
